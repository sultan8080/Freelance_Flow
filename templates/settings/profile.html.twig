{% extends 'dashboard/base.html.twig' %}

{% block title %}My Profile
{% endblock %}

{% block dashboard_content %}
	<div
		class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

		{# Glassmorphism Container #}
		<div
			class="bg-slate-900/50 backdrop-blur-xl rounded-2xl border border-white/10 overflow-hidden shadow-2xl">

			{# Header #}
			<div class="relative px-8 py-6 border-b border-white/5 bg-gradient-to-r from-blue-600/10 to-purple-600/10">
				<h2 class="text-xl font-black text-white uppercase tracking-wider">Professional Profile</h2>
				<p class="text-slate-400 text-sm mt-1">Update your legal business information for your invoices.</p>
			</div>

			{% include '_partials/_flash_messages.html.twig' %}

			{# Form Start #}
			{{ form_start(userForm, {
            'attr': {
                'class': 'p-8 space-y-8',
                'id': 'user_profile_form'
            }
        }) }}

			{# Global Errors #}
			{% if not userForm.vars.valid %}
				<div class="p-4 rounded-xl bg-red-500/10 border border-red-500/20 text-red-400 text-sm">
					{{ form_errors(userForm) }}
				</div>
			{% endif %}

			{# --- 1. Personal Identity --- #}
			<div class="space-y-6">
				<div class="flex items-center gap-2 mb-4">
					<div class="w-1 h-4 bg-blue-500 rounded-full"></div>
					<h3 class="text-[10px] font-black uppercase tracking-widest text-blue-400">Owner Identity</h3>
				</div>

				<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
					<div class="group">
						{{ form_label(userForm.firstName, 'First Name', {'label_attr': {'class': 'block text-xs font-bold text-slate-400 mb-2 ml-1'}}) }}
						{{ form_widget(userForm.firstName, {
                        'attr': {'class': 'w-full px-5 py-3 rounded-xl border border-white/10 bg-white/5 text-white focus:outline-none focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/50 transition-all'}
                    }) }}
						{% if userForm.firstName.vars.errors|length > 0 %}
							<p class="text-red-400 text-[11px] mt-1 ml-1 italic">{{ form_errors(userForm.firstName)|striptags }}</p>
						{% endif %}
					</div>

					<div class="group">
						{{ form_label(userForm.lastName, 'Last Name', {'label_attr': {'class': 'block text-xs font-bold text-slate-400 mb-2 ml-1'}}) }}
						{{ form_widget(userForm.lastName, {
                        'attr': {'class': 'w-full px-5 py-3 rounded-xl border border-white/10 bg-white/5 text-white focus:outline-none focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/50 transition-all'}
                    }) }}
						{% if userForm.lastName.vars.errors|length > 0 %}
							<p class="text-red-400 text-[11px] mt-1 ml-1 italic">{{ form_errors(userForm.lastName)|striptags }}</p>
						{% endif %}
					</div>
				</div>
			</div>

			{# --- 2. Business Details --- #}
			<div class="space-y-6 pt-6 border-t border-white/5">
				<div class="flex items-center gap-2 mb-4">
					<div class="w-1 h-4 bg-cyan-500 rounded-full"></div>
					<h3 class="text-[10px] font-black uppercase tracking-widest text-cyan-400">Company Information</h3>
				</div>

				<div class="grid grid-cols-1 gap-6">
					<div class="group">
						{{ form_label(userForm.companyName, 'Legal Company Name', {'label_attr': {'class': 'block text-xs font-bold text-slate-400 mb-2 ml-1'}}) }}
						{{ form_widget(userForm.companyName, {
                        'attr': {'class': 'w-full px-5 py-3 rounded-xl border border-white/10 bg-white/5 text-white focus:outline-none focus:border-cyan-500/50 focus:ring-1 focus:ring-cyan-500/50 transition-all'}
                    }) }}
						{% if userForm.companyName.vars.errors|length > 0 %}
							<p class="text-red-400 text-[11px] mt-1 ml-1 italic">{{ form_errors(userForm.companyName)|striptags }}</p>
						{% endif %}
					</div>

					<div class="group">
						{{ form_label(userForm.address, 'Professional Address', {'label_attr': {'class': 'block text-xs font-bold text-slate-400 mb-2 ml-1'}}) }}
						{{ form_widget(userForm.address, {
                        'attr': {'class': 'w-full px-5 py-3 rounded-xl border border-white/10 bg-white/5 text-white focus:outline-none focus:border-cyan-500/50 focus:ring-1 focus:ring-cyan-500/50 transition-all'}
                    }) }}
						{% if userForm.address.vars.errors|length > 0 %}
							<p class="text-red-400 text-[11px] mt-1 ml-1 italic">{{ form_errors(userForm.address)|striptags }}</p>
						{% endif %}
					</div>
				</div>

				<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
					<div class="group">
						{{ form_label(userForm.siretNumber, 'SIRET Number', {'label_attr': {'class': 'block text-xs font-bold text-slate-400 mb-2 ml-1'}}) }}
						{{ form_widget(userForm.siretNumber, {
                        'attr': {'class': 'w-full px-5 py-3 rounded-xl border border-white/10 bg-white/5 text-white focus:outline-none focus:border-cyan-500/50 focus:ring-1 focus:ring-cyan-500/50 transition-all', 'placeholder': '14 digits'}
                    }) }}
						{% if userForm.siretNumber.vars.errors|length > 0 %}
							<p class="text-red-400 text-[11px] mt-1 ml-1 italic">{{ form_errors(userForm.siretNumber)|striptags }}</p>
						{% endif %}
					</div>

					<div class="group">
						{{ form_label(userForm.vatNumber, 'VAT Number', {'label_attr': {'class': 'block text-xs font-bold text-slate-400 mb-2 ml-1'}}) }}
						{{ form_widget(userForm.vatNumber, {
                        'attr': {'class': 'w-full px-5 py-3 rounded-xl border border-white/10 bg-white/5 text-white focus:outline-none focus:border-cyan-500/50 focus:ring-1 focus:ring-cyan-500/50 transition-all'}
                    }) }}
						{% if userForm.vatNumber.vars.errors|length > 0 %}
							<p class="text-red-400 text-[11px] mt-1 ml-1 italic">{{ form_errors(userForm.vatNumber)|striptags }}</p>
						{% endif %}
					</div>
				</div>
			</div>

			{# --- Actions --- #}
			<div class="pt-10 flex items-center justify-end gap-4 border-t border-white/5 mt-6">
				<button type="submit" class="group relative px-10 py-3 rounded-xl overflow-hidden shadow-lg shadow-blue-500/20 transition-all hover:scale-[1.02] active:scale-95">
					<div class="absolute inset-0 w-full h-full bg-gradient-to-r from-blue-600 to-purple-700 opacity-90 group-hover:opacity-100 transition-opacity"></div>
					<span class="relative text-sm font-bold text-white flex items-center gap-2">
						<i class="fas fa-save"></i>
						Save Business Profile
					</span>
				</button>
			</div>

			{{ form_end(userForm) }}
		</div>
	</div>
{% endblock %}
